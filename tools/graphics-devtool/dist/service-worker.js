(()=>{var i="2025-01-07T12:14:02.295Z",u=0,r=new Map,c=new BroadcastChannel("intercept-channel-main"),p=new BroadcastChannel("intercept-channel-sw");p.onmessage=t=>{let e=t.data;if(e&&e.reply!==void 0){let n=r.get(e.reply);n&&(r.delete(e.reply),e.error?n.reject(e.error):n.resolve(e.result))}else e&&e.type==="request-version"&&c.postMessage({type:"sw-version",reply:e.id,result:i})};self.addEventListener("fetch",function(t){let e=t.request.url,n=e,o=e.match(/(LOCAL)(\/.*)/i);o?(console.debug("fetch intercepting",t.request.url),t.respondWith(new Promise((s,l)=>{let a=u++;r.set(a,{resolve:s,reject:l}),c.postMessage({type:"fetch",id:a,url:o[2]})}).then(s=>s==="NotFoundError"?new Response(null,{status:404,statusText:"File not found"}):new Response(s.arrayBuffer,{headers:{"Content-Type":s.type,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})).catch(s=>new Response(null,{status:500,statusText:`Error when intercepting request: ${s}`})))):(console.debug("fetch (letting through)",t.request.url),t.respondWith(fetch(n)))});})();
