(()=>{var i="2025-01-09T15:45:17.838Z",u=0,r=new Map,c=new BroadcastChannel("intercept-channel-main"),d=new BroadcastChannel("intercept-channel-sw");d.onmessage=t=>{let e=t.data;if(e&&e.reply!==void 0){let s=r.get(e.reply);s&&(r.delete(e.reply),e.error?s.reject(e.error):s.resolve(e.result))}else e&&e.type==="request-version"&&c.postMessage({type:"sw-version",reply:e.id,result:i})};self.addEventListener("fetch",function(t){let e=t.request.url,s=e,o=e.match(/(LOCAL)(\/.*)/i);o?(console.debug("fetch intercepting",t.request.url),t.respondWith(new Promise((n,l)=>{let a=u++;r.set(a,{resolve:n,reject:l}),c.postMessage({type:"fetch",id:a,url:decodeURIComponent(o[2])})}).then(n=>n==="NotFoundError"?new Response(null,{status:404,statusText:"File not found"}):new Response(n.arrayBuffer,{headers:{"Content-Type":n.type,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})).catch(n=>new Response(null,{status:500,statusText:`Error when intercepting request: ${n}`})))):(console.debug("fetch (letting through)",t.request.url),t.respondWith(fetch(s)))});})();
